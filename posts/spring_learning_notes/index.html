<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Spring]Spring学习笔记 | 风萧古道 - 勤学苦练，年复一年</title><meta name=keywords content><meta name=description content="[Spring]Spring学习笔记（一） Spring 概念  spring是开源轻量级框架   AOP：面向切面编程，扩展功能不是修改源代码实现 IOC ：控制反转，有一个类，在类里面有方法（不是静态方法） 把对象的创建通过spring配置创建类对象   一站式框架 三层：  web层 springMVC Service层 ioc Dao层 jdbcTemplate   spring版本 当前最新版本：https://projects.spring.io/spring-framework/#quick-start 官网建议用Maven/Gradle安装  Spring的ioc操作  把对象的创建交给spring进行管理 ioc操作两部分：  Ioc的配置文件方式 Ioc的注解方式    IOC底层原理  ioc底层原理使用技术  xml配置文件 Dom4j解决xml 工厂设计模式 反射    IOC使用方法（简单样例）：  导入jar包（用Maven/Gradle直接导入） 编写要操作的类（简单的User类） 创建Spring配置文件，通过配置创建类：  在src下创建xml文件，官方建议为applicationContext.xml 引入schema约束，来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html 要加入的代码 配置对象创建 <bean id=&#34;对象名&#34; class=&#34;类的路径（org.springframework.abcdef）&#34;></bean>  编写测试代码   import org.junit.Test;  import org."><meta name=author content="JohnathanLin"><link rel=canonical href=https://windypath.com/posts/spring_learning_notes/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="[Spring]Spring学习笔记"><meta property="og:description" content="[Spring]Spring学习笔记（一） Spring 概念  spring是开源轻量级框架   AOP：面向切面编程，扩展功能不是修改源代码实现 IOC ：控制反转，有一个类，在类里面有方法（不是静态方法） 把对象的创建通过spring配置创建类对象   一站式框架 三层：  web层 springMVC Service层 ioc Dao层 jdbcTemplate   spring版本 当前最新版本：https://projects.spring.io/spring-framework/#quick-start 官网建议用Maven/Gradle安装  Spring的ioc操作  把对象的创建交给spring进行管理 ioc操作两部分：  Ioc的配置文件方式 Ioc的注解方式    IOC底层原理  ioc底层原理使用技术  xml配置文件 Dom4j解决xml 工厂设计模式 反射    IOC使用方法（简单样例）：  导入jar包（用Maven/Gradle直接导入） 编写要操作的类（简单的User类） 创建Spring配置文件，通过配置创建类：  在src下创建xml文件，官方建议为applicationContext.xml 引入schema约束，来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html 要加入的代码 配置对象创建 <bean id=&#34;对象名&#34; class=&#34;类的路径（org.springframework.abcdef）&#34;></bean>  编写测试代码   import org.junit.Test;  import org."><meta property="og:type" content="article"><meta property="og:url" content="https://windypath.com/posts/spring_learning_notes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-14T15:17:52+08:00"><meta property="article:modified_time" content="2018-04-14T15:17:52+08:00"><meta property="og:site_name" content="Windypath"><meta name=twitter:card content="summary"><meta name=twitter:title content="[Spring]Spring学习笔记"><meta name=twitter:description content="[Spring]Spring学习笔记（一） Spring 概念  spring是开源轻量级框架   AOP：面向切面编程，扩展功能不是修改源代码实现 IOC ：控制反转，有一个类，在类里面有方法（不是静态方法） 把对象的创建通过spring配置创建类对象   一站式框架 三层：  web层 springMVC Service层 ioc Dao层 jdbcTemplate   spring版本 当前最新版本：https://projects.spring.io/spring-framework/#quick-start 官网建议用Maven/Gradle安装  Spring的ioc操作  把对象的创建交给spring进行管理 ioc操作两部分：  Ioc的配置文件方式 Ioc的注解方式    IOC底层原理  ioc底层原理使用技术  xml配置文件 Dom4j解决xml 工厂设计模式 反射    IOC使用方法（简单样例）：  导入jar包（用Maven/Gradle直接导入） 编写要操作的类（简单的User类） 创建Spring配置文件，通过配置创建类：  在src下创建xml文件，官方建议为applicationContext.xml 引入schema约束，来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html 要加入的代码 配置对象创建 <bean id=&#34;对象名&#34; class=&#34;类的路径（org.springframework.abcdef）&#34;></bean>  编写测试代码   import org.junit.Test;  import org."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://windypath.com/posts/"},{"@type":"ListItem","position":2,"name":"[Spring]Spring学习笔记","item":"https://windypath.com/posts/spring_learning_notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Spring]Spring学习笔记","name":"[Spring]Spring学习笔记","description":"[Spring]Spring学习笔记（一） Spring 概念  spring是开源轻量级框架   AOP：面向切面编程，扩展功能不是修改源代码实现 IOC ：控制反转，有一个类，在类里面有方法（不是静态方法） 把对象的创建通过spring配置创建类对象   一站式框架 三层：  web层 springMVC Service层 ioc Dao层 jdbcTemplate   spring版本 当前最新版本：https://projects.spring.io/spring-framework/#quick-start 官网建议用Maven/Gradle安装  Spring的ioc操作  把对象的创建交给spring进行管理 ioc操作两部分：  Ioc的配置文件方式 Ioc的注解方式    IOC底层原理  ioc底层原理使用技术  xml配置文件 Dom4j解决xml 工厂设计模式 反射    IOC使用方法（简单样例）：  导入jar包（用Maven/Gradle直接导入） 编写要操作的类（简单的User类） 创建Spring配置文件，通过配置创建类：  在src下创建xml文件，官方建议为applicationContext.xml 引入schema约束，来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html 要加入的代码 配置对象创建 \u0026lt;bean id=\u0026#34;对象名\u0026#34; class=\u0026#34;类的路径（org.springframework.abcdef）\u0026#34;\u0026gt;\u0026lt;/bean\u0026gt;  编写测试代码   import org.junit.Test;  import org.","keywords":[],"articleBody":"[Spring]Spring学习笔记（一） Spring 概念  spring是开源轻量级框架   AOP：面向切面编程，扩展功能不是修改源代码实现 IOC ：控制反转，有一个类，在类里面有方法（不是静态方法） 把对象的创建通过spring配置创建类对象   一站式框架 三层：  web层 springMVC Service层 ioc Dao层 jdbcTemplate   spring版本 当前最新版本：https://projects.spring.io/spring-framework/#quick-start 官网建议用Maven/Gradle安装  Spring的ioc操作  把对象的创建交给spring进行管理 ioc操作两部分：  Ioc的配置文件方式 Ioc的注解方式    IOC底层原理  ioc底层原理使用技术  xml配置文件 Dom4j解决xml 工厂设计模式 反射    IOC使用方法（简单样例）：  导入jar包（用Maven/Gradle直接导入） 编写要操作的类（简单的User类） 创建Spring配置文件，通过配置创建类：  在src下创建xml文件，官方建议为applicationContext.xml 引入schema约束，来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html 要加入的代码 配置对象创建  id=\"对象名\" class=\"类的路径（org.springframework.abcdef）\"  编写测试代码   import org.junit.Test;  import org.springframework.context.ApplicationContext;  import org.springframework.context.support.ClassPathXmlApplicationContext;   public class testIOC {  @Test  public void testMain() {  ApplicationContext context = new ClassPathXmlApplicationContext(\"a.xml\");  Main m = (Main) context.getBean(\"m\");  System.out.println(m);  m.add();  }  }   注：Maven自带的Junit版本为3.8.2，无法使用注解方式，故应手动修改为4.0以上版本才可使用注解。 测试结果如上图\n在spring里面通过配置文件创建对象 Beans 实例化有三种方式：\n 第一种 使用类的无参数构造创建（重点） 类里面没有无参数的构造，会出现异常 第二种 使用静态工厂创建 创建静态方法返回类对象\n根据类调用静态方法  第三种 使用实例工厂创建 创建不是静态的方法，返回类对象 先创建工厂对象 再创建目标类，通过工厂对象里的方法构造   Bean标签常用属性  id属性 起名称，任意命名 Id属性值不能包含特殊符号，根据id值得到配置对象 class属性：创建对象所在类的全路径 name属性：与id本身功能一样，但name可以加特殊符号（遗留问题） scope属性： singleton 单例 默认值 只有一个对象 Prototype 多例 多实例对象 不常用： Request 创建对象并把对象放到request域内 Session创建对象并把对象放到session域内 Globalsession 创建对象并把对象放到globalsession域内  属性注入   创建对象的时候，向类里面的属性设置值\n  属性注入的三种方式：  有参构造：（constructor-arg，构造函数为User(string username) ）  id=\"demo1\" class=\"类\"   name=\"username\" value=\"值\"   Set方法构造：（property，构造函数没有参数，但类中有set方法）  id=\"demo2\" class=\"类\"   name=\"bookname\" value=\"值\"  注入对象类型属性（属性可能是自定义对象）  创建service类和dao类，同时在service得到dao对象 具体实现过程  在service里面把dao作为类型属性 生成dao类型属性的set方法 配置文件中设置注入关系   id=”userDao” class=”dao”  id=”userService” class=”service”     name=”userDao” ref=”userDao”        P名称空间注入： 注入复杂类型属性  数组 list集合 map集合 properties类型  数组与list集合\n id=”person” class=”类”     name=”arrs”    aaa  ada  aba         name=”map”     key=”aa” value=”lucy”   key=”bb” value=”ldcy”   key=”cc” value=”luacy”       name=”properties”     key=”driverclass”com.mysql.jdbc.Driver   key=”username”user  ……      IOC和DI区别  IOC：控制反转，把对象创建交给spring进行配置 DI：依赖注入，向类里面的属性中设置值 关系：依赖注入不能单独存在，需要在ioc基础之上完成操作  Spring整合Web项目原理  加载spring核心配置文件 通过new来创建对象，虽然功能可以实现，但是效率很低 实现思想：把加载配置文件和创建对象过程，在服务器启动时候完成。 实现原理：  servletContext对象 监听器 具体使用（原理、已封装） 在服务器启动时，为每个项目创建ServletContext对象 在servletContext对象创建手，使用监听器可以具体到ServletContext对象在什么时候创建 使用监听器监听到ServletContext对象创建时候， 加载spring配置文件，把配置文件配置对象创建 把创建出来的对象放到SERVLETcONTEXT域对象里面（setAttribute方法） 获取对象时候，到ServletContext域得到（getAttribute方法）    [Spring]Spring学习笔记（二） Spring的bean管理（注解） 注解介绍  代码里面特殊标记，使用注解可以完成功能 注解写法 @注解名称(属性名称=属性值) 注解使用在类上面，方法上面 和 属性上面  Spring注解开发准备工作  导入jar包  导入基本的jar包 导入aop的jar包   创建类，创建方法 创建Spring配置文件，引入约束  ioc基本功能，引入约束 做Spring的ioc注解开发，引入新的约束     注解创建对象 配置文件中，开启注解扫描\n到包里面扫描类、方法、属性上面是否有注解\n\n只扫描属性上面的注解\ncontext:annotation-config注解注入属性  在创建对象的类上面使用注解实现  @Component(value=”user”) //Public class User{ …… 创建对象有4个注解 注：功能一样   @Component @Controller @Service @Repository   创建对象是 单实例 还是多实例 @Scope(value=”prototype/singleton”)  注解注入属性 创建service类，创建dao类\n@Service(value=”userService”) Public class UserService{  //得到dao对象  //定义dao类型属性  //在dao属性上面使用注解 完成对象注入  @Autowired  Private UserDao userDao;  //使用注解方式的时候不需要使用set方法  Public void add(){  ……  userDao.add(); } } 通过类名寻找对应的对象进来，自动注入/装配。 注入属性的两个对象\n@Autowired 自动装配\n@Resource(name) 注入指定对象，name为对象名\n配置文件和注解混合使用\n创建对象操作使用配置文件方式实现，然后注入属性的操作使用注解方式实现。\nAOP概念 AOP百度百科\n AOP：面向切面（方向）编程，扩展功能不修改源代码实现 AOP采取横向抽取机制，取代了传统纵向集成体系重复性代码（性能监视、事务管理、安全检查、缓存）  AOP原理： 原理图 横向机制： 无接口情况： 使用动态代理实现。\nAOP术语  Joinpoint(连接点):所谓连接点是指那些被拦截到的点。在spring中,这些点指的是方法,因为spring只支持方法类型的连接点. 类里面哪些方法可以被增强，这些方法被称为连接点。 Pointcut(切入点):所谓切入点是指我们要对哪些Joinpoint进行拦截的定义. 在类里面可以有很多的方法被增强，比如实际操作中，只是增强了类里面add方法和update方法，实际增强的方法被称为切入点 Advice(通知/增强):所谓通知是指拦截到Joinpoint之后所要做的事情就是通知.通知分为前置通知,后置通知,异常通知,最终通知,环绕通知(切面要完成的功能) 增强的逻辑，称为增强，比如扩展日志功能，这个日志功能称为增强 前置通知：在方法之前执行 后置通知：在方法之后执行 异常通知：方法出现异常 最终通知：在后置之后执行 环绕通知：在方法之前和之后执行 Introduction(引介):引介是一种特殊的通知在不修改类代码的前提下, Introduction可以在运行期为类动态地添加一些方法或Field.（一般不用） 用动态的方式向类中加属性/方法 Target(目标对象):代理的目标对象（要增强的类） Weaving(织入):是指把增强应用到目标对象来创建新的代理对象的过程.spring采用动态代理织入，而AspectJ采用编译期织入和类装在期织入。 是把advice应用到target的过程 Proxy（代理）:一个类被AOP织入增强后，就产生一个结果代理类 Aspect(切面): 是切入点和通知（引介）的结合 把增强应用到具体方法上面，把增强用到切入点的过程。  Spring的aop操作  在Spring里面进aop操作，使用aspectJ实现  aspectj不是spring的一部分，和spring一起使用进行aop操作 Spring2.0以后增加了对aspectj的支持   使用aspectj实现aop有两种方式  基于aspectj的xml配置 基于aspectj的注解方式    AOP操作准备  除了导入基本的jar包外，还需要导入aop相关的jar包。 创建spring核心配置文件，导入aop的约束   来源：https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html\n使用表达式配置切入点  切入点，实际增强的方法 常用的表达式 规则：execution(?())  execution(* cn.itcast.aop.Book.add(..)) 某个方法 execution(* cn.itcast.aop.Book.*(..)) 某个类中的所有方法 execution(* .(..)) //所有类中的所有方法 匹配所有save开头的方法execution(* save*(..))    Aspectj的aop操作   id=”book”\u0026nbsp;class=”类”  id=”myBook”\u0026nbsp;class=”类”     expression=”execution(* cn.itcast.aop.Book.*(..))”\u0026nbsp;id=”pointcut1”\u0026nbsp;/   ref=”myBook”    method=”before1”\u0026nbsp;pointcut-ref=”pointcut1”/   method=”after1”\u0026nbsp;pointcut-ref=”pointcut1”\u0026nbsp;/   method=”around1”\u0026nbsp;pointcut-ref=”pointcut1”\u0026nbsp;/   环绕：\n//MyBook类 Public void around1(ProceedingJoinPoint proceedingJoinPoint){  //方法之前  System.out.println(“方法之前”);  //执行被增强的方法  proceedingJoinPoint.proceed();  //方法之后  System.out.println(“方法之后”); } Log4j介绍  通过log4j可以看到程序运行过程中更详细的信息  经常使用log4j查看日志   使用  导入log4j的jar包 赋值log4j的配置文件，复制到src下面Log4j.properties   设置日志级别  info看到基本信息 debug 看到详细信息    Spring整合web项目演示   演示问题 每次访问action时，都会加载spring配置文件 action调用service，service调用dao\n  解决方案\n 在服务器启动的时候，创建对象加载配置文件。 底层使用监听器，servletcontext对象    在spring里面不需要我们自己写代码实现，帮忙封装\n 封装了一个监听器，只需要配置监听器就可以了 需先导入整合web项目的jar包，spring-web      Org.springframework.web.context.ContextLoaderListener   指定加载spring配置文件位置     ","wordCount":"426","inLanguage":"en","datePublished":"2018-04-14T15:17:52+08:00","dateModified":"2018-04-14T15:17:52+08:00","author":{"@type":"Person","name":"JohnathanLin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://windypath.com/posts/spring_learning_notes/"},"publisher":{"@type":"Organization","name":"风萧古道 - 勤学苦练，年复一年","logo":{"@type":"ImageObject","url":"https://windypath.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://windypath.com/ accesskey=h title="Windypath (Alt + H)">Windypath</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://windypath.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://windypath.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://windypath.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://windypath.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://windypath.com/>Home</a>&nbsp;»&nbsp;<a href=https://windypath.com/posts/>Posts</a></div><h1 class=post-title>[Spring]Spring学习笔记</h1><div class=post-meta><span title="2018-04-14 15:17:52 +0800 +0800">April 14, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;JohnathanLin&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/spring_learning_notes.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h1 id=springspring学习笔记一>[Spring]Spring学习笔记（一）<a hidden class=anchor aria-hidden=true href=#springspring学习笔记一>#</a></h1><h2 id=spring-概念>Spring 概念<a hidden class=anchor aria-hidden=true href=#spring-概念>#</a></h2><ol><li>spring是开源轻量级框架</li><li><ul><li>AOP：面向切面编程，扩展功能不是修改源代码实现</li><li>IOC ：控制反转，有一个类，在类里面有方法（不是静态方法）
把对象的创建通过spring配置创建类对象</li></ul></li><li>一站式框架
三层：<ul><li>web层 springMVC</li><li>Service层 ioc</li><li>Dao层  jdbcTemplate</li></ul></li><li>spring版本
当前最新版本：<a href=https://projects.spring.io/spring-framework/#quick-start>https://projects.spring.io/spring-framework/#quick-start</a>
官网建议用Maven/Gradle安装</li></ol><h2 id=spring的ioc操作>Spring的ioc操作<a hidden class=anchor aria-hidden=true href=#spring的ioc操作>#</a></h2><ol><li>把对象的创建交给spring进行管理</li><li>ioc操作两部分：<ul><li>Ioc的配置文件方式</li><li>Ioc的注解方式</li></ul></li></ol><h2 id=ioc底层原理>IOC底层原理<a hidden class=anchor aria-hidden=true href=#ioc底层原理>#</a></h2><ol><li>ioc底层原理使用技术<ol><li>xml配置文件</li><li>Dom4j解决xml</li><li>工厂设计模式</li><li>反射</li></ol></li></ol><p><img loading=lazy src=/images/spring_knowledge1.png alt></p><h2 id=ioc使用方法简单样例>IOC使用方法（简单样例）：<a hidden class=anchor aria-hidden=true href=#ioc使用方法简单样例>#</a></h2><ol><li>导入jar包（用Maven/Gradle直接导入）</li><li>编写要操作的类（简单的User类）</li><li>创建Spring配置文件，通过配置创建类：<ol><li>在src下创建xml文件，官方建议为applicationContext.xml</li><li>引入schema约束，来源：<a href=https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html>https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html</a>
要加入的代码<img loading=lazy src=/images/spring_knowledge2.png alt></li><li>配置对象创建<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;对象名&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;类的路径（org.springframework.abcdef）&#34;</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li>编写测试代码</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#f92672>import</span> org.junit.Test<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> org.springframework.context.ApplicationContext<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> org.springframework.context.support.ClassPathXmlApplicationContext<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>testIOC</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>testMain</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ApplicationContext context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassPathXmlApplicationContext<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;a.xml&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            Main m <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>Main<span style=color:#f92672>)</span> context<span style=color:#f92672>.</span><span style=color:#a6e22e>getBean</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;m&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>m<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            m<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div></li></ol><p>注：Maven自带的Junit版本为3.8.2，无法使用注解方式，故应手动修改为4.0以上版本才可使用注解。
<img loading=lazy src=/images/spring_knowledge3.png alt>
测试结果如上图</p><h2 id=在spring里面通过配置文件创建对象>在spring里面通过配置文件创建对象<a hidden class=anchor aria-hidden=true href=#在spring里面通过配置文件创建对象>#</a></h2><p>Beans 实例化有三种方式：</p><ol><li>第一种 使用类的无参数构造创建（重点）
类里面没有无参数的构造，会出现异常</li><li>第二种 使用静态工厂创建
创建静态方法返回类对象<br>根据类调用静态方法
&lt;bean id=”bean2” class=”****” factory-method=”getBean2”></li><li>第三种 使用实例工厂创建
创建不是静态的方法，返回类对象
先创建工厂对象
&lt;bean id=”bean3factory” class=”bean3类”>
再创建目标类，通过工厂对象里的方法构造
&lt;bean id=”bean3” factory-bean=”bean3factory” factory-method-”getBean3”></li></ol><h2 id=bean标签常用属性>Bean标签常用属性<a hidden class=anchor aria-hidden=true href=#bean标签常用属性>#</a></h2><ol><li>id属性  起名称，任意命名
Id属性值不能包含特殊符号，根据id值得到配置对象</li><li>class属性：创建对象所在类的全路径</li><li>name属性：与id本身功能一样，但name可以加特殊符号（遗留问题）</li><li>scope属性：
singleton 单例   默认值  只有一个对象
Prototype 多例     多实例对象
不常用：
Request  创建对象并把对象放到request域内
Session创建对象并把对象放到session域内
Globalsession 创建对象并把对象放到globalsession域内</li></ol><h2 id=属性注入>属性注入<a hidden class=anchor aria-hidden=true href=#属性注入>#</a></h2><ol><li><p>创建对象的时候，向类里面的属性设置值</p></li><li><p>属性注入的三种方式：
<img loading=lazy src=/images/spring_knowledge5.png alt></p><ol><li>有参构造：（constructor-arg，构造函数为User(string username)  ）<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;demo1&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;类&#34;</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;username&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;值&#34;</span><span style=color:#f92672>&gt;&lt;/constructor-arg&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div></li><li>Set方法构造：（property，构造函数没有参数，但类中有set方法）<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;demo2&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;类&#34;</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;bookname&#34;</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;值&#34;</span><span style=color:#f92672>&gt;&lt;/property&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div>注入对象类型属性（属性可能是自定义对象）<ol><li>创建service类和dao类，同时在service得到dao对象</li><li>具体实现过程<ol><li>在service里面把dao作为类型属性</li><li>生成dao类型属性的set方法</li><li>配置文件中设置注入关系</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>”userDao”</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>”dao”</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>”userService”</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>”service”</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 不写value 写ref属性 对应ID --&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>”userDao”</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>”userDao”</span><span style=color:#f92672>&gt;&lt;/property&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div></li></ol></li></ol></li></ol><p>P名称空间注入：
<img loading=lazy src=/images/spring_knowledge6.png alt></p><h3 id=注入复杂类型属性>注入复杂类型属性<a hidden class=anchor aria-hidden=true href=#注入复杂类型属性>#</a></h3><ul><li>数组</li><li>list集合</li><li>map集合</li><li>properties类型</li></ul><p>数组与list集合</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>”person”</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>”类”</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- 数组 list--&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>”arrs”</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;list&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;value&gt;</span>aaa<span style=color:#f92672>&lt;/value&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;value&gt;</span>ada<span style=color:#f92672>&lt;/value&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;value&gt;</span>aba<span style=color:#f92672>&lt;/value&gt;</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/list&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/property&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>&lt;!-- map --&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>”map”</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;map&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;entry</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>”aa”</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>”lucy”</span><span style=color:#f92672>&gt;&lt;/entry&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;entry</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>”bb”</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>”ldcy”</span><span style=color:#f92672>&gt;&lt;/entry&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;entry</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>”cc”</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>”luacy”</span><span style=color:#f92672>&gt;&lt;/entry&gt;</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/map&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/property&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;property</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>”properties”</span><span style=color:#f92672>&gt;</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;props&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;prop</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>”driverclass”</span><span style=color:#f92672>&gt;</span>com.mysql.jdbc.Driver<span style=color:#f92672>&lt;/prop&gt;</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;prop</span> <span style=color:#a6e22e>key=</span><span style=color:#e6db74>”username”</span><span style=color:#f92672>&gt;</span>user<span style=color:#f92672>&lt;/prop&gt;</span> 
</span></span><span style=display:flex><span>            …… 
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/props&gt;</span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/property&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div><h3 id=ioc和di区别>IOC和DI区别<a hidden class=anchor aria-hidden=true href=#ioc和di区别>#</a></h3><ul><li>IOC：控制反转，把对象创建交给spring进行配置</li><li>DI：依赖注入，向类里面的属性中设置值</li><li>关系：依赖注入不能单独存在，需要在ioc基础之上完成操作</li></ul><h3 id=spring整合web项目原理>Spring整合Web项目原理<a hidden class=anchor aria-hidden=true href=#spring整合web项目原理>#</a></h3><ol><li>加载spring核心配置文件
通过new来创建对象，虽然功能可以实现，但是效率很低</li><li>实现思想：把加载配置文件和创建对象过程，在服务器启动时候完成。</li><li>实现原理：<ol><li>servletContext对象</li><li>监听器</li><li>具体使用（原理、已封装）
在服务器启动时，为每个项目创建ServletContext对象
在servletContext对象创建手，使用监听器可以具体到ServletContext对象在什么时候创建
使用监听器监听到ServletContext对象创建时候，
加载spring配置文件，把配置文件配置对象创建
把创建出来的对象放到SERVLETcONTEXT域对象里面（setAttribute方法）
获取对象时候，到ServletContext域得到（getAttribute方法）</li></ol></li></ol><h1 id=springspring学习笔记二>[Spring]Spring学习笔记（二）<a hidden class=anchor aria-hidden=true href=#springspring学习笔记二>#</a></h1><h2 id=spring的bean管理注解>Spring的bean管理（注解）<a hidden class=anchor aria-hidden=true href=#spring的bean管理注解>#</a></h2><h3 id=注解介绍>注解介绍<a hidden class=anchor aria-hidden=true href=#注解介绍>#</a></h3><ul><li>代码里面特殊标记，使用注解可以完成功能</li><li>注解写法 @注解名称(属性名称=属性值)</li><li>注解使用在类上面，方法上面 和 属性上面</li></ul><h3 id=spring注解开发准备工作>Spring注解开发准备工作<a hidden class=anchor aria-hidden=true href=#spring注解开发准备工作>#</a></h3><ol><li>导入jar包<ol><li>导入基本的jar包</li><li>导入aop的jar包</li></ol></li><li>创建类，创建方法</li><li>创建Spring配置文件，引入约束<ol><li>ioc基本功能，引入约束</li><li>做Spring的ioc注解开发，引入新的约束
<img loading=lazy src=/images/spring_knowledge7.png alt></li></ol></li></ol><h3 id=注解创建对象>注解创建对象<a hidden class=anchor aria-hidden=true href=#注解创建对象>#</a></h3><p>配置文件中，开启注解扫描</p><p>到包里面扫描类、方法、属性上面是否有注解</p><p>&lt;context:component-scan base-package=”包名”>&lt;/context:component-scan></p><p>只扫描属性上面的注解</p><p><a href=context:annotation-config>context:annotation-config</a></p><h3 id=注解注入属性>注解注入属性<a hidden class=anchor aria-hidden=true href=#注解注入属性>#</a></h3><ol><li>在创建对象的类上面使用注解实现</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span><span style=color:#f92672>(</span>value<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>”</span>user<span style=color:#960050;background-color:#1e0010>”</span><span style=color:#f92672>)</span> <span style=color:#75715e>//&lt;bean id=”user” class=”” /&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Public <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>……</span>
</span></span></code></pre></div><ol start=2><li>创建对象有4个注解
注：功能一样</li></ol><ul><li>@Component</li><li>@Controller</li><li>@Service</li><li>@Repository
<img loading=lazy src=/images/spring_knowledge8.png alt></li></ul><ol start=3><li>创建对象是 单实例 还是多实例
@Scope(value=”prototype/singleton”)</li></ol><h3 id=注解注入属性-1>注解注入属性<a hidden class=anchor aria-hidden=true href=#注解注入属性-1>#</a></h3><p>创建service类，创建dao类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Service</span><span style=color:#f92672>(</span>value<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>”</span>userService<span style=color:#960050;background-color:#1e0010>”</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Public <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserService</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//得到dao对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//定义dao类型属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//在dao属性上面使用注解 完成对象注入
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    Private UserDao userDao<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//使用注解方式的时候不需要使用set方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Public <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>   <span style=color:#960050;background-color:#1e0010>……</span>
</span></span><span style=display:flex><span>    userDao<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>通过类名寻找对应的对象进来，自动注入/装配。
注入属性的两个对象</p><p>@Autowired 自动装配</p><p>@Resource(name) 注入指定对象，name为对象名</p><p>配置文件和注解混合使用</p><p>创建对象操作使用配置文件方式实现，然后注入属性的操作使用注解方式实现。</p><h3 id=aop概念>AOP概念<a hidden class=anchor aria-hidden=true href=#aop概念>#</a></h3><p><a href="https://baike.baidu.com/item/AOP/1332219?fr=aladdin">AOP百度百科</a></p><ol><li>AOP：面向切面（方向）编程，扩展功能不修改源代码实现</li><li>AOP采取横向抽取机制，取代了传统纵向集成体系重复性代码（性能监视、事务管理、安全检查、缓存）</li></ol><h3 id=aop原理>AOP原理：<a hidden class=anchor aria-hidden=true href=#aop原理>#</a></h3><p>原理图
<img loading=lazy src=/images/spring_knowledge9.png alt>
横向机制：
<img loading=lazy src=/images/spring_knowledge10.png alt>
无接口情况：
<img loading=lazy src=/images/spring_knowledge11.png alt>
使用动态代理实现。</p><h3 id=aop术语>AOP术语<a hidden class=anchor aria-hidden=true href=#aop术语>#</a></h3><ul><li>Joinpoint(连接点):所谓连接点是指那些被拦截到的点。在spring中,这些点指的是方法,因为spring只支持方法类型的连接点.
类里面哪些方法可以被增强，这些方法被称为连接点。</li><li>Pointcut(切入点):所谓切入点是指我们要对哪些Joinpoint进行拦截的定义.
在类里面可以有很多的方法被增强，比如实际操作中，只是增强了类里面add方法和update方法，实际增强的方法被称为切入点</li><li>Advice(通知/增强):所谓通知是指拦截到Joinpoint之后所要做的事情就是通知.通知分为前置通知,后置通知,异常通知,最终通知,环绕通知(切面要完成的功能)
增强的逻辑，称为增强，比如扩展日志功能，这个日志功能称为增强
前置通知：在方法之前执行
后置通知：在方法之后执行
异常通知：方法出现异常
最终通知：在后置之后执行
环绕通知：在方法之前和之后执行</li><li>Introduction(引介):引介是一种特殊的通知在不修改类代码的前提下, Introduction可以在运行期为类动态地添加一些方法或Field.（一般不用）
用动态的方式向类中加属性/方法</li><li>Target(目标对象):代理的目标对象（要增强的类）</li><li>Weaving(织入):是指把增强应用到目标对象来创建新的代理对象的过程.spring采用动态代理织入，而AspectJ采用编译期织入和类装在期织入。
是把advice应用到target的过程</li><li>Proxy（代理）:一个类被AOP织入增强后，就产生一个结果代理类</li><li>Aspect(切面): 是切入点和通知（引介）的结合
把增强应用到具体方法上面，把增强用到切入点的过程。</li></ul><h3 id=spring的aop操作>Spring的aop操作<a hidden class=anchor aria-hidden=true href=#spring的aop操作>#</a></h3><ol><li>在Spring里面进aop操作，使用aspectJ实现<ol><li>aspectj不是spring的一部分，和spring一起使用进行aop操作</li><li>Spring2.0以后增加了对aspectj的支持</li></ol></li><li>使用aspectj实现aop有两种方式<ol><li>基于aspectj的xml配置</li><li>基于aspectj的注解方式</li></ol></li></ol><h3 id=aop操作准备>AOP操作准备<a hidden class=anchor aria-hidden=true href=#aop操作准备>#</a></h3><ol><li>除了导入基本的jar包外，还需要导入aop相关的jar包。</li><li>创建spring核心配置文件，导入aop的约束
<img loading=lazy src=/images/spring_knowledge12.png alt></li></ol><p>来源：<a href=https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html>https://docs.spring.io/spring/docs/4.2.x/spring-framework-reference/html/xsd-configuration.html</a></p><h3 id=使用表达式配置切入点>使用表达式配置切入点<a hidden class=anchor aria-hidden=true href=#使用表达式配置切入点>#</a></h3><ol><li>切入点，实际增强的方法</li><li>常用的表达式
规则：execution(&lt;访问修饰符>?&lt;返回类型>&lt;方法名>(&lt;参数>)&lt;异常>)<ol><li>execution(* cn.itcast.aop.Book.add(..)) 某个方法</li><li>execution(* cn.itcast.aop.Book.*(..)) 某个类中的所有方法</li><li>execution(* <em>.</em>(..)) //所有类中的所有方法</li><li>匹配所有save开头的方法execution(* save*(..))</li></ol></li></ol><h3 id=aspectj的aop操作>Aspectj的aop操作<a hidden class=anchor aria-hidden=true href=#aspectj的aop操作>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--配置对象--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>”book”&amp;nbsp;class=”类”</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>”myBook”&amp;nbsp;class=”类”</span><span style=color:#f92672>&gt;&lt;/bean&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--配置aop操作--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:config&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--配置切入点--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:pointcut</span> <span style=color:#a6e22e>expression=</span><span style=color:#e6db74>”execution(*</span> <span style=color:#960050;background-color:#1e0010>cn.itcast.aop.Book.*(..))”&amp;nbsp;</span><span style=color:#a6e22e>id=</span><span style=color:#e6db74>”pointcut1”&amp;nbsp;/</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--配置切面--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:aspect</span> <span style=color:#a6e22e>ref=</span><span style=color:#e6db74>”myBook”</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--配置增强类型 method，增强类里面使用哪个方法作为前置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--前置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:before</span> <span style=color:#a6e22e>method=</span><span style=color:#e6db74>”before1”&amp;nbsp;pointcut-ref=”pointcut1”/</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--后置--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:after-returning</span> <span style=color:#a6e22e>method=</span><span style=color:#e6db74>”after1”&amp;nbsp;pointcut-ref=”pointcut1”&amp;nbsp;/</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--环绕--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;aop:around</span> <span style=color:#a6e22e>method=</span><span style=color:#e6db74>”around1”&amp;nbsp;pointcut-ref=”pointcut1”&amp;nbsp;/</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/aop:aspect&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/aop:config&gt;</span>
</span></span></code></pre></div><p>环绕：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//MyBook类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Public <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>around1</span><span style=color:#f92672>(</span>ProceedingJoinPoint proceedingJoinPoint<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//方法之前
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>“</span>方法之前<span style=color:#960050;background-color:#1e0010>”</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//执行被增强的方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    proceedingJoinPoint<span style=color:#f92672>.</span><span style=color:#a6e22e>proceed</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//方法之后
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#960050;background-color:#1e0010>“</span>方法之后<span style=color:#960050;background-color:#1e0010>”</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=log4j介绍>Log4j介绍<a hidden class=anchor aria-hidden=true href=#log4j介绍>#</a></h3><ol><li>通过log4j可以看到程序运行过程中更详细的信息<ol><li>经常使用log4j查看日志</li></ol></li><li>使用<ol><li>导入log4j的jar包</li><li>赋值log4j的配置文件，复制到src下面Log4j.properties</li></ol></li><li>设置日志级别<ol><li>info看到基本信息</li><li>debug 看到详细信息</li></ol></li></ol><h3 id=spring整合web项目演示>Spring整合web项目演示<a hidden class=anchor aria-hidden=true href=#spring整合web项目演示>#</a></h3><ol><li><p>演示问题
每次访问action时，都会加载spring配置文件
action调用service，service调用dao</p></li><li><p>解决方案</p><ol><li>在服务器启动的时候，创建对象加载配置文件。</li><li>底层使用监听器，servletcontext对象</li></ol></li><li><p>在spring里面不需要我们自己写代码实现，帮忙封装</p><ol><li>封装了一个监听器，只需要配置监听器就可以了</li><li>需先导入整合web项目的jar包，spring-web</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;!--Web.xml--&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;listener&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;listener-class&gt;</span>
</span></span><span style=display:flex><span>    Org.springframework.web.context.ContextLoaderListener
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/listener-class&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/listenner&gt;</span>
</span></span></code></pre></div><ol start=3><li>指定加载spring配置文件位置
<img loading=lazy src=/images/spring_knowledge13.png alt></li></ol></li></ol></div><footer class=post-footer><nav class=paginav><a class=prev href=https://windypath.com/posts/compilation_principle_first_follow_select/><span class=title>« Prev Page</span><br><span>[编译原理]FIRST、FOLLOW和SELECT</span></a>
<a class=next href=https://windypath.com/posts/distribution_estimation_algorithm/><span class=title>Next Page »</span><br><span>[算法]分布估计算法 - 一种求解多维背包问题的混合分布估计算法_王凌</span></a></nav></footer></article></main><footer class=footer><span>Windypath 风萧古道 <a href=https://beian.miit.gov.cn/>闽ICP备15016446号-3</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>