<!doctype html><html lang=zh dir=auto><head><style></style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("link");t.href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&&display=swap",t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)})()</script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | 风萧古道 - 勤学苦练，年复一年</title>
<meta name=keywords content><meta name=description content="Posts - 风萧古道 - 勤学苦练，年复一年"><meta name=author content="JohnathanLin"><link rel=canonical href=https://windypath.com/posts/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.aad4cfe560b8ceaeb2f8d05545a6d657693dc2ce6ff1f9f53c443ce34a304302.css integrity="sha256-qtTP5WC4zq6y+NBVRabWV2k9ws5v8fn1PEQ840owQwI=" rel="preload stylesheet" as=style><link rel=icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://windypath.com/posts/index.xml><link rel=alternate hreflang=zh href=https://windypath.com/posts/><link rel=alternate hreflang=en href=https://windypath.com/en/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-MLYM2PFRSJ"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MLYM2PFRSJ",{anonymize_ip:!1})}</script><meta property="og:title" content="Posts"><meta property="og:description" content="勤学苦练，年复一年"><meta property="og:type" content="website"><meta property="og:url" content="https://windypath.com/posts/"><meta property="og:site_name" content="Windypath"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="勤学苦练，年复一年"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://windypath.com/posts/"}]}</script><script src=https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MLYM2PFRSJ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MLYM2PFRSJ")</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://windypath.com/ accesskey=h title="风萧古道 (Alt + H)">风萧古道</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://windypath.com/en/ title="Switch to English Page" aria-label="Switch to English Page">En</a></li></ul></div></div><ul id=menu><li><a href=https://windypath.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://windypath.com/categories/ title=分类><span>分类</span></a></li><li><a href=https://windypath.com/about/ title=关于><span>关于</span></a></li><li><a href=https://windypath.com/mybooks/ title=藏书><span>藏书</span></a></li><li><a href=https://windypath.com/myfriends/ title=朋友><span>朋友</span></a></li><li><a href=https://windypath.com/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>搭建Spark实战环境（3台linux虚拟机集群）（一）样板机的搭建</h2></header><div class=entry-content><p>系统及软件配置 系统配置 内存：16g 2400 cpu：i5 9400F
软件配置 Windows 10 1903版本 VMware workstation 15.10 CentOS centos-release-7-7.1908.0.el7.centos.x86_64 Java jdk-8u241-linux-x64.tar.gz Scala scala-2.11.8.tgz 值得一提的是，win10 1903版本与VMware 15.10之前的版本不兼容，会出现卡死（虚拟机繁忙）的问题，该问题在15.10版本解决。 资源来源于网络： VMware 15.10 链接：https://pan.baidu.com/s/1bpF3M1V3qPydQgGl-hUC1g 提取码：sb8t CentOS 7.7 链接：https://pan.baidu.com/s/1xFOlCvNrmXXwciVNOL2Pew 提取码：wxdx Java jdk-8u241-linux-x64.tar.gz 链接：https://pan.baidu.com/s/1E1TyObvyO6iQUW44lTCqDQ 提取码：6xw9 Scala scala-2.11.8.tgz 链接：https://pan.baidu.com/s/1TQB-wnffHh0i2aqzzfSi6A 提取码：iowh
安装前的准备 查看Windows下的网络配置 以Windows 10 1903为例（windows下控制台输入“winver”可以看自己windows版本），在控制面板->网络和Internet->网络连接中，可以看到本机上的网络配置。本次搭建这个集群，我们需要虚拟机和物理机（也就是windows）共用一个网络，所以需要使用桥接模式。 本人电脑联网时使用的是这个WLAN 2，它使用的网卡是Realtek 8821AE …. 的，记住这个名字。
配置VMware 虚拟网络编辑器 使用管理员权限打开VMware，菜单栏的编辑->虚拟网络适配器：将桥接模式的“桥接到”指向刚才记下的Realtek 8821AE，点击确定保存配置。 同时还要记住我WLAN 2这张网卡的网络配置信息：（windows cmd输入ipconfig查看） 集群及网络配置 根据刚才WLAN 2网络配置信息可知，我的虚拟机的网卡只能配置为192.168.3.***。 你得根据自己网卡上的网络配置去修改虚拟机网卡配置。
序号 IP地址 机器名 运行进程 核数/内存 用户名 1 192.168.3.30 master NN/SNN/DN/RM...</p></div><footer class=entry-footer>&lt;span title='2020-05-23 17:42:09 +0800 +0800'>五月 23, 2020&lt;/span>&amp;nbsp;·&amp;nbsp;JohnathanLin</footer><a class=entry-link aria-label="post link to 搭建Spark实战环境（3台linux虚拟机集群）（一）样板机的搭建" href=https://windypath.com/posts/build_spark_environment/></a></article><article class=post-entry><header class=entry-header><h2>Springboot操作MongoDB，包括增改查及复杂操作</h2></header><div class=entry-content><p>单条件查询 使用BasicDBObject配置查询条件
List&lt;AbstractMongoEntity> list = Lists.newArrayList(); // 配置查询条件 BasicDBObject cond1 = new BasicDBObject(); cond1.append("_id", new ObjectId("5de39f20684014f1d8b8fa37")); FindIterable&lt;Document> findIterable = // 执行查询 mongoTemplate.getCollection("crawler_cjwt").find(cond1); // 装配查询结果 MongoCursor&lt;Document> cursor = findIterable.iterator(); Document document = null; CjwtMongoEntity question = null; while (cursor.hasNext()) { document = cursor.next(); // 使用MongoConverter可以将结果对象映射到Java Bean question = mongoConverter.read(CjwtMongoEntity.class, document); list.add(question); } System.out.println(question); cursor.close(); 返回的是一个指针，所以我们需要通过该指针遍历结果，并装进list中返回使用。 对应的mongo脚本：
db.crawler_cjwt.find({'_id':new ObjectId("5de39f20684014f1d8b8fa37")}) 查询该集合所有结果 List&lt;FgcxMongoEntity> list = Lists.newArrayList(); // find函数没有传参，即查询所有 FindIterable&lt;Document> findIterable = crawlMongoTemplate.getCollection("fgcx").find(); MongoCursor&lt;Document> cursor = findIterable....</p></div><footer class=entry-footer>&lt;span title='2020-05-19 12:41:37 +0800 +0800'>五月 19, 2020&lt;/span>&amp;nbsp;·&amp;nbsp;JohnathanLin</footer><a class=entry-link aria-label="post link to Springboot操作MongoDB，包括增改查及复杂操作" href=https://windypath.com/posts/spring_operate_mongodb/></a></article><article class=post-entry><header class=entry-header><h2>Unison在Linux下的安装与使用</h2></header><div class=entry-content><p>这是一篇在公司写的文档，但不涉及公司隐私。几乎所有内容参考于：https://www.cnblogs.com/welcomer/p/5068287.html
引言 编写目的 编写本文档是为了让读者快速上手使用Unison进行两台Linux服务器文件进行同步。
前景 Unison是windows和unix平台下都可以使用的双向文件同步工具，它能使两个文件夹（本地或网络上的）保持内容的一致。 unison 拥有其它一些同步工具或文件系统的相同特性，但也有自己的特点：
跨平台使用； 对内核和用户 权限 没有特别要求； unison 是双向的，它能自动 处理两分拷贝中更新没有冲突的部分，有冲突的部分将会显示出来让用户选择更新策略； 只要是能连通的两台主机 ，就可以运行 unison ，可以直接使用 socket 连接或安全的 ssh 连接方式，对带宽 的要求不高，使用类似 rsync 的压缩传输协议。
Unison双向同步的一个缺点是,对于同名文件在两个同步文件夹中都被修改时,unison是不会去同步的,因为unison无法判断以那个为准。
定义 本文档介绍如何同步两台服务器，为表述方便，将第一台服务器命名为“服务器1”，操作该服务器的用户为“system1”；将第二台服务器命名为“服务器2”，操作该服务器的用户命名为“system2”。
参考资料 《使用Unison同步服务器目录》 https://www.cnblogs.com/welcomer/p/5068287.html
安装与初始化 由于在目录同步时需要跨服务器通过ssh连接，因此不建议使用root用户，建议新建普通用户进行操作。
在两台或多台服务器之间同步，只需要在第一台服务器上安装Unison，再用scp连接将可执行的unison文件复制到第二台服务器上即可。
安装Unison 由于使用源码包安装Unison需要安装Ocaml依赖，且Unison默认将文件复制到“/用户名/bin/”目录下，会导致在make install步骤时提示错误，所以建议使用apt-get或yum安装。
Ubuntu下安装：在配置好阿里云的apt-get源之后，使用sudo apt-get install unison安装。
CentoOS下安装：使用yum install unison安装。
将Unison复制到服务器2 使用apt-get或yum安装Unison后，默认放在/usr/bin/unison。
1、使用ssh连接到远程主机：
scp /usr/bin/unison root@服务器2的IP地址:/root/ 注意：在Ubuntu下，如果服务器没有安装openssh-server，则无法被其他服务器连接，解决方法：
使用sudo apt-get install openssh-server安装 在/etc/ssh/sshd_config文件中，把将PermitRootLogin prohibie-password 修改为：PermitRootLogin yes 重启ssh服务即可使用。 2、登录服务器2，使用复制命令，将可执行文件unison从/root/移到/usr/bin/下。
cp /root/unison /usr/bin/ 3、在两台服务器上都输入unison –version，查看是否安装成功。如果返回了版本号，则安装成功。
[root@服务器名 ~]$ unison -version unison version 2....</p></div><footer class=entry-footer>&lt;span title='2020-02-22 14:19:06 +0800 +0800'>二月 22, 2020&lt;/span>&amp;nbsp;·&amp;nbsp;JohnathanLin</footer><a class=entry-link aria-label="post link to Unison在Linux下的安装与使用" href=https://windypath.com/posts/unison_install_in_linux/></a></article><article class=post-entry><header class=entry-header><h2>Java实现类似WINSCP访问远程Linux服务器，执行命令、上传文件、下载文件</h2></header><div class=entry-content><p>pom.xml添加的依赖：
&lt;!-- https://mvnrepository.com/artifact/ch.ethz.ganymed/ganymed-ssh2 --> &lt;dependency> &lt;groupId>ch.ethz.ganymed&lt;/groupId> &lt;artifactId>ganymed-ssh2&lt;/artifactId> &lt;version>262&lt;/version> &lt;/dependency> 这里注意，不同版本的这玩意用法有差别。这里我使用的是262。
操作类代码如下：
import ch.ethz.ssh2.*; import java.io.*; /** * @Author: 风萧古道的博客 windypath.com * @Date: 2019/11/29 15:14 */ public class SSHUtil { // uploadFile to Linux /** * 上传文件到Linux * * @param ip ip地址 * @param username 登录用户名 * @param password 密码 * @param remoteFilePath 目标文件所在完整目录 * @param file 本地文件File对象 * @return */ public static boolean uploadFile(String ip, String username, String password, String remoteFilePath, File file) { FileInputStream input = null; BufferedOutputStream boutput = null; Connection conn = null; try { conn = new Connection(ip); conn....</p></div><footer class=entry-footer>&lt;span title='2020-02-20 10:32:24 +0800 +0800'>二月 20, 2020&lt;/span>&amp;nbsp;·&amp;nbsp;JohnathanLin</footer><a class=entry-link aria-label="post link to Java实现类似WINSCP访问远程Linux服务器，执行命令、上传文件、下载文件" href=https://windypath.com/posts/java_implement_winscp_like/></a></article><article class=post-entry><header class=entry-header><h2>一个被废弃的项目——自动爬取信息然后发给我自己邮箱上</h2></header><div class=entry-content><p>这是一个python项目。
使用到的技术包括爬虫和发邮件
代码如下：
#!/usr/bin/env python # -*- coding: utf-8 -*- # @Time : 2020/2/5 22:49 # @Author : Johnathan Lin import time import requests import random import json import re from bs4 import BeautifulSoup import smtplib from email.mime.text import MIMEText from email.header import Header from urllib.parse import urljoin from bs4.element import NavigableString # 第三方 SMTP 服务 mail_host = "smtp.163.com" # 设置服务器 mail_user = "你的邮箱" # 用户名 mail_pass = "你的密码" # 口令 # 发送人和接收人 sender = '你的邮箱' # 自己发给自己就可以了， receivers = ['你的邮箱'] # 接收邮件，可设置为你的QQ邮箱或者其他邮箱 # 爬虫请求头 headers = { 'User-Agent': 'Mozilla/5....</p></div><footer class=entry-footer>&lt;span title='2020-02-09 17:21:03 +0800 +0800'>二月 9, 2020&lt;/span>&amp;nbsp;·&amp;nbsp;JohnathanLin</footer><a class=entry-link aria-label="post link to 一个被废弃的项目——自动爬取信息然后发给我自己邮箱上" href=https://windypath.com/posts/a_bad_project_crawler_and_email/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://windypath.com/posts/page/3/>«&nbsp;上一页&nbsp;
</a><a class=next href=https://windypath.com/posts/page/5/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>© Windypath 风萧古道 <strong>For Chinese Software</strong>. <a href=https://beian.miit.gov.cn/>闽ICP备15016446号-3</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>