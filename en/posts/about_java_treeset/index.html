<!doctype html><html lang=en dir=auto><head><style>:root{--sys-font-family:"Noto Serif SC";--zh-font-family:"Noto Serif SC";--base-font-family:"Noto Serif SC";--code-font-family:"Noto Serif SC";--article-font-family:"Noto Serif SC"}</style><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Some Usage and features on Java TreeSet | WindyPath - For Chinese Software</title><meta name=keywords content><meta name=description content="An Example (kotlin) import java.util.TreeSet /** * Define a data class to test TreeSet Collection * Sort by TreeSet * id: player id * score: player score */ data class PlayerScore(var id: Int, var score: Int): Comparable<PlayerScore> { override fun compareTo(other: PlayerScore): Int { return if (score > other.score) { 1 } else if (score < other.score) { -1 } else { 0 } } } fun main() { //create a TreeSet val treeSet: TreeSet<PlayerScore> = TreeSet() //create 3 PlayerScore object，and use 'id101Obj' reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet."><meta name=author content="JohnathanLin"><link rel=canonical href=https://windypath.com/en/posts/about_java_treeset/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.f8d339d021558cf1432c2d04aa6f79bbc6a1da42ed8db3062968eb753737b731.css integrity="sha256-+NM50CFVjPFDLC0Eqm95u8ah2kLtjbMGKWjrdTc3tzE=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://windypath.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://windypath.com/posts/about_java_treeset/><link rel=alternate hreflang=en href=https://windypath.com/en/posts/about_java_treeset/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Some Usage and features on Java TreeSet"><meta property="og:description" content="An Example (kotlin) import java.util.TreeSet /** * Define a data class to test TreeSet Collection * Sort by TreeSet * id: player id * score: player score */ data class PlayerScore(var id: Int, var score: Int): Comparable<PlayerScore> { override fun compareTo(other: PlayerScore): Int { return if (score > other.score) { 1 } else if (score < other.score) { -1 } else { 0 } } } fun main() { //create a TreeSet val treeSet: TreeSet<PlayerScore> = TreeSet() //create 3 PlayerScore object，and use 'id101Obj' reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet."><meta property="og:type" content="article"><meta property="og:url" content="https://windypath.com/en/posts/about_java_treeset/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-18T17:10:44+08:00"><meta property="article:modified_time" content="2022-06-18T17:10:44+08:00"><meta property="og:site_name" content="Windypath"><meta name=twitter:card content="summary"><meta name=twitter:title content="Some Usage and features on Java TreeSet"><meta name=twitter:description content="An Example (kotlin) import java.util.TreeSet /** * Define a data class to test TreeSet Collection * Sort by TreeSet * id: player id * score: player score */ data class PlayerScore(var id: Int, var score: Int): Comparable<PlayerScore> { override fun compareTo(other: PlayerScore): Int { return if (score > other.score) { 1 } else if (score < other.score) { -1 } else { 0 } } } fun main() { //create a TreeSet val treeSet: TreeSet<PlayerScore> = TreeSet() //create 3 PlayerScore object，and use 'id101Obj' reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://windypath.com/en/posts/"},{"@type":"ListItem","position":2,"name":"Some Usage and features on Java TreeSet","item":"https://windypath.com/en/posts/about_java_treeset/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Some Usage and features on Java TreeSet","name":"Some Usage and features on Java TreeSet","description":"An Example (kotlin) import java.util.TreeSet /** * Define a data class to test TreeSet Collection * Sort by TreeSet * id: player id * score: player score */ data class PlayerScore(var id: Int, var score: Int): Comparable\u0026lt;PlayerScore\u0026gt; { override fun compareTo(other: PlayerScore): Int { return if (score \u0026gt; other.score) { 1 } else if (score \u0026lt; other.score) { -1 } else { 0 } } } fun main() { //create a TreeSet val treeSet: TreeSet\u0026lt;PlayerScore\u0026gt; = TreeSet() //create 3 PlayerScore object，and use \u0026#39;id101Obj\u0026#39; reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet.","keywords":[],"articleBody":"An Example (kotlin) import java.util.TreeSet /** * Define a data class to test TreeSet Collection * Sort by TreeSet * id: player id * score: player score */ data class PlayerScore(var id: Int, var score: Int): Comparable { override fun compareTo(other: PlayerScore): Int { return if (score \u003e other.score) { 1 } else if (score \u003c other.score) { -1 } else { 0 } } } fun main() { //create a TreeSet val treeSet: TreeSet = TreeSet() //create 3 PlayerScore object，and use 'id101Obj' reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet.add(PlayerScore(102,200)) treeSet.add(id101Obj) treeSet.add(PlayerScore(103,300)) println(\"Add the objects in a different order and print out by score from smallest to largest:\") showTreeSet(treeSet) println(\"Add an object with duplicated id but different score, and print out by score from smallest to largest:\") treeSet.add(PlayerScore(101,500)) showTreeSet(treeSet) println(\"Change the score of the object whose id is 101 to 400， and print out by score from smallest to largest:\") id101Obj.score = 400 showTreeSet(treeSet) } private fun showTreeSet(treeSet: TreeSet) { treeSet.forEachIndexed { index, s -\u003e println(\"rank:${index+1} score:${s.score} id:${s.id}\") } println() } Console output:\nAdd the objects in a different order and print out by score from smallest to largest: rank:1 score:100 id:101 rank:2 score:200 id:102 rank:3 score:300 id:103 Add an object with duplicated id but different score, and print out by score from smallest to largest: rank:1 score:100 id:101 rank:2 score:200 id:102 rank:3 score:300 id:103 rank:4 score:500 id:101 Change the score of the object whose id is 101 to 400， and print out by score from smallest to largest: rank:1 score:400 id:101 rank:2 score:200 id:102 rank:3 score:300 id:103 rank:4 score:500 id:101 Analysis First, PlayerScore implements Comparable interface , implements the function of sorting from smallest to largest. If there are only three data pieces at the beginning, insert them in different order, treeset does sort normally.\nThen, when player 101 score was changed, we need to resort. We tried 2 ways to resort.\nChange id101Obj’s score by reference. Add a new obj which id is 101 and has a new score into treeset. Result:\nid101Obj’s score was changed, but its rank is still 1. Although the score is sorted, it has two objects which id is 101. So how to resort treeset when player’s score was changed?\nOne solution is that you can remove the object from treeset, and change its score, then add it to treeset. This is because the underlying TreeSet is a red-black tree, and the tree structure is adjusted when it is deleted and inserted.\nCode:\n//create a TreeSet val treeSet: TreeSet = TreeSet() //create 3 PlayerScore object，and use 'id101Obj' reference to the first obj //put these objects into the treeset val id101Obj = PlayerScore(101,100) //put in different order treeSet.add(PlayerScore(102,200)) treeSet.add(id101Obj) treeSet.add(PlayerScore(103,300)) println(\"Add the objects in a different order and print out by score from smallest to largest:\") showTreeSet(treeSet) treeSet.remove(id101Obj) id101Obj.score = 400 treeSet.add(id101Obj) println(\"remove id101Obj from TreeSet，change score，and then add to treeSet中， print out by score from smallest to largest:\") showTreeSet(treeSet) Console output:\nAdd the objects in a different order and print out by score from smallest to largest: rank:1 score:100 id:101 rank:2 score:200 id:102 rank:3 score:300 id:103 remove id101Obj from TreeSet，change score，and then add to treeSet中， print out by score from smallest to largest: rank:1 score:200 id:102 rank:2 score:300 id:103 rank:3 score:400 id:101 Move Forward The solution that “Remove it, edit it, and add it” can finish resort, but treeSet is thread-unsafe. If there are many threads update player’s score, it might be cause some problems.\nAlthough TreeSet can sort as it inserts, it only allow insert once. The modification of the score after insertion does not change the sorting.\nTreeSet doesn’t make sense for rank list that move around a lot.\nAnother Rank List Solution I use TreeSet because it can sort as it inserts, but it’s not appropriate for a rank list.\nSo, if So another way to think about it is, if you only use a longer ArrayList to store the player’s score object, you also sort it on insert/update/delete?\nInsert/update/delete, modify the data in the ArrayList, and then sort.\n","wordCount":"682","inLanguage":"en","datePublished":"2022-06-18T17:10:44+08:00","dateModified":"2022-06-18T17:10:44+08:00","author":{"@type":"Person","name":"JohnathanLin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://windypath.com/en/posts/about_java_treeset/"},"publisher":{"@type":"Organization","name":"WindyPath - For Chinese Software","logo":{"@type":"ImageObject","url":"https://windypath.com/%3Clink%20/%20abs%20url%3E"}}}</script><script src=https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js></script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://windypath.com/en/ accesskey=h title="Windypath (Alt + H)">Windypath</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://windypath.com/ title=点击这里切换中文网站 aria-label=点击这里切换中文网站>Zh</a></li></ul></div></div><ul id=menu><li><a href=https://windypath.com/en/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://windypath.com/en/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://windypath.com/en/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://windypath.com/en/about/ title=About><span>About</span></a></li><li><a href=https://windypath.com/en/mybooks/ title="My Books"><span>My Books</span></a></li><li><a href=https://windypath.com/en/myfriends/ title="My Friends"><span>My Friends</span></a></li><li><a href=https://windypath.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Some Usage and features on Java TreeSet</h1><div class=post-meta><span title='2022-06-18 17:10:44 +0800 +0800'>June 18, 2022</span>&nbsp;·&nbsp;JohnathanLin&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://windypath.com/posts/about_java_treeset/>Zh</a></li></ul></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#an-example-kotlin aria-label="An Example (kotlin)">An Example (kotlin)</a></li><li><a href=#analysis aria-label=Analysis>Analysis</a></li><li><a href=#move-forward aria-label="Move Forward">Move Forward</a></li><li><a href=#another-rank-list-solution aria-label="Another Rank List Solution">Another Rank List Solution</a></li></ul></div></details></div><div class=post-content><h2 id=an-example-kotlin>An Example (kotlin)<a hidden class=anchor aria-hidden=true href=#an-example-kotlin>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>import</span> java.util.TreeSet
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Define a data class to test TreeSet Collection
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Sort by TreeSet
</span></span></span><span style=display:flex><span><span style=color:#75715e> * id: player id
</span></span></span><span style=display:flex><span><span style=color:#75715e> * score: player score
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>data</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PlayerScore</span>(<span style=color:#66d9ef>var</span> id: Int, <span style=color:#66d9ef>var</span> score: Int): Comparable&lt;PlayerScore&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>compareTo</span>(other: PlayerScore): Int {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>if</span> (score &gt; other.score) {
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (score &lt; other.score) {
</span></span><span style=display:flex><span>            -<span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//create a TreeSet
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> treeSet: TreeSet&lt;PlayerScore&gt; = TreeSet()
</span></span><span style=display:flex><span>    <span style=color:#75715e>//create 3 PlayerScore object，and use &#39;id101Obj&#39; reference to the first obj
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//put these objects into the treeset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> id101Obj = PlayerScore(<span style=color:#ae81ff>101</span>,<span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//put in different order 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    treeSet.add(PlayerScore(<span style=color:#ae81ff>102</span>,<span style=color:#ae81ff>200</span>))
</span></span><span style=display:flex><span>    treeSet.add(id101Obj)
</span></span><span style=display:flex><span>    treeSet.add(PlayerScore(<span style=color:#ae81ff>103</span>,<span style=color:#ae81ff>300</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Add the objects in a different order and print out by score from smallest to largest:&#34;</span>)
</span></span><span style=display:flex><span>    showTreeSet(treeSet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Add an object with duplicated id but different score, and print out by score from smallest to largest:&#34;</span>)
</span></span><span style=display:flex><span>    treeSet.add(PlayerScore(<span style=color:#ae81ff>101</span>,<span style=color:#ae81ff>500</span>))
</span></span><span style=display:flex><span>    showTreeSet(treeSet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;Change the score of the object whose id is 101 to 400， and print out by score from smallest to largest:&#34;</span>)
</span></span><span style=display:flex><span>    id101Obj.score = <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    showTreeSet(treeSet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>showTreeSet</span>(treeSet: TreeSet&lt;PlayerScore&gt;) {
</span></span><span style=display:flex><span>    treeSet.forEachIndexed { index, s <span style=color:#f92672>-&gt;</span>
</span></span><span style=display:flex><span>        println(<span style=color:#e6db74>&#34;rank:</span><span style=color:#e6db74>${index+1}</span><span style=color:#e6db74> score:</span><span style=color:#e6db74>${s.score}</span><span style=color:#e6db74> id:</span><span style=color:#e6db74>${s.id}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    println()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Console output:</p><pre tabindex=0><code>Add the objects in a different order and print out by score from smallest to largest:
rank:1 score:100 id:101
rank:2 score:200 id:102
rank:3 score:300 id:103

Add an object with duplicated id but different score, and print out by score from smallest to largest:
rank:1 score:100 id:101
rank:2 score:200 id:102
rank:3 score:300 id:103
rank:4 score:500 id:101

Change the score of the object whose id is 101 to 400， and print out by score from smallest to largest:
rank:1 score:400 id:101
rank:2 score:200 id:102
rank:3 score:300 id:103
rank:4 score:500 id:101
</code></pre><h2 id=analysis>Analysis<a hidden class=anchor aria-hidden=true href=#analysis>#</a></h2><p>First, <code>PlayerScore</code> implements <code>Comparable</code> interface , implements the function of sorting from smallest to largest. If there are only three data pieces at the beginning, insert them in different order, treeset does sort normally.</p><p>Then, when player 101 score was changed, we need to resort. We tried 2 ways to resort.</p><ol><li>Change <code>id101Obj</code>&rsquo;s score by reference.</li><li>Add a new obj which id is 101 and has a new score into treeset.</li></ol><p>Result:</p><ol><li><code>id101Obj</code>&rsquo;s score was changed, but its rank is still 1.</li><li>Although the score is sorted, it has two objects which id is 101.</li></ol><p>So how to resort treeset when player&rsquo;s score was changed?</p><p>One solution is that you can remove the object from treeset, and change its score, then add it to treeset. This is because the underlying TreeSet is a red-black tree, and the tree structure is adjusted when it is deleted and inserted.</p><p>Code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>    <span style=color:#75715e>//create a TreeSet
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> treeSet: TreeSet&lt;PlayerScore&gt; = TreeSet()
</span></span><span style=display:flex><span>    <span style=color:#75715e>//create 3 PlayerScore object，and use &#39;id101Obj&#39; reference to the first obj
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//put these objects into the treeset
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>val</span> id101Obj = PlayerScore(<span style=color:#ae81ff>101</span>,<span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>//put in different order 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    treeSet.add(PlayerScore(<span style=color:#ae81ff>102</span>,<span style=color:#ae81ff>200</span>))
</span></span><span style=display:flex><span>    treeSet.add(id101Obj)
</span></span><span style=display:flex><span>    treeSet.add(PlayerScore(<span style=color:#ae81ff>103</span>,<span style=color:#ae81ff>300</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     println(<span style=color:#e6db74>&#34;Add the objects in a different order and print out by score from smallest to largest:&#34;</span>)
</span></span><span style=display:flex><span>    showTreeSet(treeSet)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    treeSet.remove(id101Obj)
</span></span><span style=display:flex><span>    id101Obj.score = <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    treeSet.add(id101Obj)
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;remove id101Obj from TreeSet，change score，and then add to treeSet中， print out by score from smallest to largest:&#34;</span>)
</span></span><span style=display:flex><span>    showTreeSet(treeSet)
</span></span></code></pre></div><p>Console output:</p><pre tabindex=0><code>Add the objects in a different order and print out by score from smallest to largest:
rank:1 score:100 id:101
rank:2 score:200 id:102
rank:3 score:300 id:103

remove id101Obj from TreeSet，change score，and then add to treeSet中， print out by score from smallest to largest:
rank:1 score:200 id:102
rank:2 score:300 id:103
rank:3 score:400 id:101
</code></pre><h2 id=move-forward>Move Forward<a hidden class=anchor aria-hidden=true href=#move-forward>#</a></h2><p>The solution that &ldquo;Remove it, edit it, and add it&rdquo; can finish resort, but treeSet is thread-unsafe. If there are many threads update player&rsquo;s score, it might be cause some problems.</p><p>Although TreeSet can sort as it inserts, it only allow insert once. The modification of the score after insertion does not change the sorting.</p><p>TreeSet doesn&rsquo;t make sense for rank list that move around a lot.</p><h2 id=another-rank-list-solution>Another Rank List Solution<a hidden class=anchor aria-hidden=true href=#another-rank-list-solution>#</a></h2><p>I use TreeSet because it can sort as it inserts, but it&rsquo;s not appropriate for a rank list.</p><p>So, if
So another way to think about it is, if you only use a longer ArrayList to store the player&rsquo;s score object, you also sort it on insert/update/delete?</p><p>Insert/update/delete, modify the data in the ArrayList, and then sort.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://windypath.com/en/posts/nostalgic_winxp/><span class=title>« Prev</span><br><span>Windows XP Virtual Machine Chinese Version Without Activation Image Download</span></a></nav></footer></article></main><footer class=footer><span>Windypath 风萧古道 <strong>For Chinese Software</strong>. <a href=https://beian.miit.gov.cn/>闽ICP备15016446号-3</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
.</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>